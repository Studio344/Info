# GitHub Pagesで静的サイトをデプロイする際に知っておくべきこと

## はじめに

Studio344 のポートフォリオサイトは GitHub Pages でホスティングしています。「無料で使えるし、GitHubと統合されているから楽だろう」と思って選びましたが、実際に運用してみると細かな注意点がいくつかありました。本記事では、静的サイトを GitHub Pages にデプロイする際のベストプラクティスと注意点をまとめます。

## GitHub Pages の基本設定

### カスタムドメインの設定

GitHub Pages にカスタムドメイン（studio344.net）を設定するには、以下の手順が必要です。

1. リポジトリの Settings → Pages → Custom domain にドメインを入力
2. DNS レコードの設定（A レコードまたは CNAME）
3. HTTPS の有効化（Let's Encrypt 経由で自動発行）

DNS 設定では、Apex ドメイン（studio344.net）の場合は A レコードを GitHub の IP に向けます。

```
185.199.108.153
185.199.109.153
185.199.110.153
185.199.111.153
```

サブドメイン（www.studio344.net）の場合は CNAME レコードを使います。

### CNAME ファイル

カスタムドメインを設定すると、リポジトリのルートに `CNAME` ファイルが自動生成されます。このファイルを誤って削除すると、カスタムドメインの設定が解除されるので注意が必要です。

## デプロイのワークフロー

### ブランチベースのデプロイ

GitHub Pages はデフォルトで特定のブランチ（通常は `main`）の内容をデプロイします。Studio344 では以下のワークフローを採用しています。

1. `fix/` や `feature/` ブランチで開発
2. ローカルで動作確認
3. `main` にマージ → 自動デプロイ

このシンプルなフローで十分ですが、`main` に直接 push しないようブランチ保護を設定しています。

### キャッシュの問題

GitHub Pages はCDN（Fastly）経由で配信されるため、デプロイ後もキャッシュが残ることがあります。CSS や JS を更新した場合、ユーザーのブラウザに古いファイルが表示されるケースがあります。

対策として、重要な更新時にはクエリパラメータでキャッシュバスティングを行います。

```html
<link rel="stylesheet" href="styles.css?v=20260207">
```

## 静的サイトの制約と対策

### JavaScript レンダリングの課題

GitHub Pages は静的ファイルを配信するだけで、サーバーサイド処理はできません。Studio344 のブログ記事は Markdown ファイルを JavaScript で動的にレンダリングしていますが、これには SEO 上の課題があります。

クローラーがJavaScript を実行しない場合、コンテンツが見えません。対策として `<noscript>` タグで静的なフォールバックを用意しています。

### フォームの処理

HTML フォームは GitHub Pages 単体では処理できません。Studio344 では Formspree などの外部サービスを利用して、サーバーレスでフォーム送信を実現しています。

### 404 ページ

GitHub Pages では `404.html` を配置することでカスタム404ページを表示できます。SPA（Single Page Application）の場合、すべてのルートを `index.html` に向ける手法も使えますが、Studio344 のようなマルチページサイトでは素直に `404.html` を用意するのがベストです。

## パフォーマンスの最適化

GitHub Pages + CDN の組み合わせは十分速いですが、さらなる最適化としてスクリプトの遅延読み込み（`defer` や `async`）を活用しています。AdSense のスクリプトには `async` を付与し、ページの初期表示を妨げないようにしています。

## まとめ

GitHub Pages は静的サイトのホスティングとして非常に優れたサービスです。カスタムドメイン + HTTPS が無料で使え、Git との統合によりデプロイも簡単です。ただし、キャッシュ管理、SEO 対策、フォーム処理など、静的サイト特有の課題には適切な対策が必要です。これらのポイントを押さえておけば、快適な運用が可能です。
